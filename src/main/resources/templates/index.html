<html>
<head>
<meta charset="utf-8">
<meta name="viewport"
  content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0;" />
<meta name="_csrf" content="${_csrf.token}" />
<!-- default header name is X-CSRF-TOKEN -->
<meta name="_csrf_header" content="${_csrf.headerName}" />
<link type="favicon" rel="shortcut icon" href="${res}/images/favicon.ico" />
<title>股票列表</title>
<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<link href="${request.contextPath}/static/css/style.css" rel="stylesheet" type="text/css" />
<style type="text/css">
.pageDetail {
	display: none;
}

.show {
	display: table-row;
}
</style>
<script>
  $(function() {
    $('#list').click(function() {
      $('.pageDetail').toggleClass('show');
    });
  });
</script>
</head>
<body>
  <div class="wrapper">
    <div class="align_middle">
      <h1 style="padding: 30px 0 10px;">列表[#if curuser??]${curuser.username!}[/#if]</h1>
      <form action="${request.contextPath}/stocks" method="post">
        <table class="gridtable" style="width: 100%;">
          <tr>
            <th>代码：</th>
            <td><input type="text" name="code"
              value="[#if queryBean.code??]${queryBean.code!}[/#if]" /></td>
            <th>名称：</th>
            <td><input type="text" name="stockName"
              value="[#if queryBean.stockName??]${queryBean.stockName!}[/#if]" /></td>
            <td rowspan="2"><input type="submit" value="查询" /></td>
          </tr>
          <tr>
            <th>页码：</th>
            <td><input type="text" name="page" value="${queryBean.page!0}" /></td>
            <th>页面大小：</th>
            <td><input type="text" name="rows" value="${queryBean.rows!10}" /></td>
          </tr>
        </table>
        <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
      </form>
      [#if pageInfo??]
      <table class="gridtable" style="width: 100%;">
        <tr>
          <th colspan="2">分页信息 - [<a href="javascript:;" id="list">展开/收缩</a>]
          </th>
        </tr>
        <tr class="pageDetail">
          <th style="width: 300px;">当前页号</th>
          <td>${pageInfo.pageNum}</td>
        </tr>
        <tr class="pageDetail">
          <th>页面大小</th>
          <td>${pageInfo.pageSize}</td>
        </tr>
        <tr class="pageDetail">
          <th>起始行号(>=)</th>
          <td>${pageInfo.startRow}</td>
        </tr>
        <tr class="pageDetail">
          <th>终止行号(<=)</th>
          <td>${pageInfo.endRow}</td>
        </tr>
        <tr class="pageDetail">
          <th>总结果数</th>
          <td>${pageInfo.total}</td>
        </tr>
        <tr class="pageDetail">
          <th>总页数</th>
          <td>${pageInfo.pages}</td>
        </tr>
        <tr class="pageDetail">
          <th>第一页</th>
          <td>${pageInfo.firstPage}</td>
        </tr>
        <tr class="pageDetail">
          <th>前一页</th>
          <td>${pageInfo.prePage}</td>
        </tr>
        <tr class="pageDetail">
          <th>下一页</th>
          <td>${pageInfo.nextPage}</td>
        </tr>
        <tr class="pageDetail">
          <th>最后一页</th>
          <td>${pageInfo.lastPage}</td>
        </tr>
        <tr class="pageDetail">
          <th>是否为第一页</th>
          <td>${pageInfo.isFirstPage?c}</td>
        </tr>
        <tr class="pageDetail">
          <th>是否为最后一页</th>
          <td>${pageInfo.isLastPage?c}</td>
        </tr>
        <tr class="pageDetail">
          <th>是否有前一页</th>
          <td>${pageInfo.hasPreviousPage?c}</td>
        </tr>
        <tr class="pageDetail">
          <th>是否有下一页</th>
          <td>${pageInfo.hasNextPage?c}</td>
        </tr>
      </table>
      <table class="gridtable" style="width: 100%;">
        [#if msg??]
        <tr style="color: red;">
          <th colspan="5">${msg}</th>
        </tr>
        [/#if]
      </table>
      <table class="gridtable" style="width: 100%;">
        <thead>
          <tr>
            <th colspan="4">查询结果 - [<a href="${request.contextPath}/stocks/add">新增国家(地区)</a>]
            </th>
          </tr>
          <tr>
            <th>ID</th>
            <th>交易所</th>
            <th>代码</th>
            <th>股票名</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          [#list pageInfo.list as queryBean]
          <tr>
            <td align="center">${queryBean.id}</td>
            <td align="center">${queryBean.stockExchange}</td>
            <td align="center"><a href="${request.contextPath}/stocks/detail/${queryBean.code}">${queryBean.code}</a></td>
            <td align="center"><a href="${request.contextPath}/stocks/detail/${queryBean.code}">${queryBean.stockName}</a></td>
            <td style="text-align: center;">
              [<a href="${request.contextPath}/stocks/view/${queryBean.id}">修改</a>] - 
              [<a href="${request.contextPath}/stocks/delete/${queryBean.id}">删除</a>]
            </td>
          </tr>
          [/#list]
        </tbody>
      </table>
      <table class="gridtable" style="width: 100%; text-align: center;">
        <tr>
          [#if pageInfo.hasPreviousPage]
          <td><a
            href="${request.contextPath}/stocks?page=1&rows=${pageInfo.pageSize}&stockName=${queryBean.stockName}&code=${queryBean.code}">首页</a>
          </td>
          <td><a
            href="${request.contextPath}/stocks?page=${pageInfo.prePage}&rows=${pageInfo.pageSize}&stockName=${queryBean.stockName}&code=${queryBean.code}">前一页</a>
          </td> [/#if] [#list pageInfo.navigatepageNums as nav] [#if nav == pageInfo.pageNum]
          <td style="font-weight: bold;">${nav}</td> [/#if] [#if nav != pageInfo.pageNum]
          <td><a
            href="${request.contextPath}/stocks?page=${nav}&rows=${pageInfo.pageSize}&stockName=[#if queryBean.stockName??]${queryBean.stockName}[/#if]&code=[#if queryBean.code??]${queryBean.code}[/#if]">${nav}</a>
          </td> [/#if] [/#list] [#if pageInfo.hasNextPage]
          <td><a
            href="${request.contextPath}/stocks?page=${pageInfo.nextPage}&rows=${pageInfo.pageSize}&stockName=[#if queryBean.stockName??]${queryBean.stockName}[/#if]&code=[#if queryBean.code??]${queryBean.code}[/#if]">下一页</a>
          </td>
          <td><a
            href="${request.contextPath}/stocks?page=${pageInfo.pages}&rows=${pageInfo.pageSize}&stockName=[#if queryBean.stockName??]${queryBean.stockName}[/#if]&code=[#if queryBean.code??]${queryBean.code}[/#if]">尾页</a>
          </td> [/#if]
        </tr>
      </table>
      [/#if]
    </div>
    <div class="push"></div>
  </div>
</body>
</html>